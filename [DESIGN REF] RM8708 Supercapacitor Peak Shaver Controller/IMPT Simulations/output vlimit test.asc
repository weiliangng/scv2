Version 4
SHEET 1 2556 1100
WIRE -656 -592 -1504 -592
WIRE -544 -592 -656 -592
WIRE -384 -592 -544 -592
WIRE -304 -592 -384 -592
WIRE -160 -592 -304 -592
WIRE -128 -592 -160 -592
WIRE -64 -592 -128 -592
WIRE -32 -592 -64 -592
WIRE 64 -592 48 -592
WIRE 144 -592 64 -592
WIRE 176 -592 144 -592
WIRE 192 -592 176 -592
WIRE 528 -592 288 -592
WIRE 576 -592 528 -592
WIRE 672 -592 576 -592
WIRE 800 -592 672 -592
WIRE 1024 -592 880 -592
WIRE 1104 -592 1024 -592
WIRE 1168 -592 1104 -592
WIRE 1408 -592 1168 -592
WIRE 1552 -592 1504 -592
WIRE 1616 -592 1552 -592
WIRE 1648 -592 1616 -592
WIRE 1760 -592 1728 -592
WIRE 1792 -592 1760 -592
WIRE 1888 -592 1792 -592
WIRE 1968 -592 1888 -592
WIRE 2256 -592 1968 -592
WIRE -656 -576 -656 -592
WIRE -544 -576 -544 -592
WIRE 1968 -576 1968 -592
WIRE 2256 -576 2256 -592
WIRE -128 -560 -128 -592
WIRE 672 -560 672 -592
WIRE 1024 -560 1024 -592
WIRE 1552 -560 1552 -592
WIRE 1792 -560 1792 -592
WIRE 144 -544 144 -592
WIRE 2256 -512 2096 -512
WIRE -656 -496 -656 -512
WIRE -544 -496 -656 -496
WIRE -384 -496 -384 -512
WIRE 2096 -496 2096 -512
WIRE 2096 -496 1968 -496
WIRE -544 -480 -544 -496
WIRE -384 -480 -384 -496
WIRE 624 -480 608 -480
WIRE 1088 -480 1072 -480
WIRE 1968 -480 1968 -496
WIRE 1552 -464 1552 -496
WIRE 144 -448 144 -480
WIRE 672 -448 672 -464
WIRE 848 -448 672 -448
WIRE 880 -448 848 -448
WIRE 1024 -448 1024 -464
WIRE 1024 -448 880 -448
WIRE 848 -432 848 -448
WIRE 848 -432 736 -432
WIRE -64 -416 -64 -592
WIRE 64 -416 64 -592
WIRE 848 -416 848 -432
WIRE 1088 -400 1088 -480
WIRE 608 -384 608 -480
WIRE 176 -368 176 -592
WIRE 176 -368 160 -368
WIRE 736 -320 736 -432
WIRE 848 -320 848 -336
WIRE 944 -320 848 -320
WIRE 272 -304 272 -544
WIRE 848 -304 848 -320
WIRE 944 -304 944 -320
WIRE 1424 -304 1424 -544
WIRE 1616 -304 1616 -592
WIRE -64 -272 -64 -336
WIRE -64 -272 -112 -272
WIRE -32 -272 -64 -272
WIRE 64 -272 64 -336
WIRE 64 -272 32 -272
WIRE 96 -272 64 -272
WIRE -112 -256 -112 -272
WIRE 96 -256 96 -272
WIRE -32 -208 -32 -272
WIRE 32 -208 32 -272
WIRE 736 -208 736 -240
WIRE 768 -208 736 -208
WIRE 848 -208 832 -208
WIRE 864 -208 848 -208
WIRE 944 -208 944 -224
WIRE 944 -208 928 -208
WIRE 848 -192 848 -208
WIRE 1424 -176 1424 -224
WIRE 640 -144 400 -144
WIRE 1504 -144 704 -144
WIRE 272 -112 272 -224
WIRE 400 -80 400 -144
WIRE 432 -80 400 -80
WIRE 528 -80 528 -592
WIRE 528 -80 496 -80
WIRE 608 -80 608 -304
WIRE 640 -80 608 -80
WIRE 656 -80 640 -80
WIRE 1056 -80 1040 -80
WIRE 1088 -80 1088 -320
WIRE 1088 -80 1056 -80
WIRE 1168 -80 1168 -592
WIRE 1200 -80 1168 -80
WIRE 1296 -80 1264 -80
WIRE 1328 -80 1296 -80
WIRE 1472 -80 1392 -80
WIRE 1504 -80 1504 -144
WIRE 1504 -80 1472 -80
WIRE 736 -64 736 -208
WIRE 768 -64 736 -64
WIRE 784 -64 768 -64
WIRE 816 -64 784 -64
WIRE 912 -64 880 -64
WIRE 928 -64 912 -64
WIRE 944 -64 944 -208
WIRE 944 -64 928 -64
WIRE 272 -32 272 -112
WIRE 400 -32 400 -80
WIRE 528 -32 528 -80
WIRE 656 -32 656 -80
WIRE 784 -32 784 -64
WIRE 912 -32 912 -64
WIRE 1040 -32 1040 -80
WIRE 1168 -32 1168 -80
WIRE 1296 -32 1296 -80
WIRE 1424 -32 1424 -176
WIRE 160 32 160 -368
WIRE 224 32 160 32
WIRE 1552 32 1472 32
WIRE 1616 32 1616 -224
WIRE 1616 32 1552 32
WIRE 1888 80 1888 -592
WIRE 160 96 160 32
WIRE 224 96 160 96
WIRE 1616 96 1472 96
WIRE 1760 96 1760 -592
WIRE 1760 96 1616 96
WIRE -304 112 -304 -592
WIRE -160 160 -160 -592
WIRE 224 160 -160 160
WIRE -304 224 -304 192
WIRE 224 224 -304 224
WIRE 1552 224 1472 224
WIRE 1888 224 1888 160
WIRE 1888 224 1552 224
WIRE 1888 256 1888 224
WIRE -304 272 -304 224
WIRE -64 288 -128 288
WIRE 160 288 16 288
WIRE 224 288 160 288
WIRE 1504 288 1504 -80
WIRE 1504 288 1472 288
WIRE 1520 288 1504 288
WIRE 1600 288 1584 288
WIRE 0 352 -16 352
WIRE 160 352 64 352
WIRE 224 352 160 352
WIRE 1504 352 1504 288
WIRE 1504 352 1472 352
WIRE -304 368 -304 352
WIRE 1888 368 1888 336
WIRE 224 416 112 416
WIRE 1552 416 1472 416
WIRE 2016 416 1552 416
WIRE 0 480 -128 480
WIRE 224 480 0 480
WIRE 1552 480 1472 480
WIRE 1856 480 1552 480
WIRE -576 528 -688 528
WIRE -336 528 -496 528
WIRE -128 528 -128 480
WIRE -128 528 -336 528
WIRE 112 544 80 544
WIRE 224 544 192 544
WIRE 1552 544 1472 544
WIRE 1584 544 1552 544
WIRE 1664 544 1648 544
WIRE -496 576 -496 528
WIRE -448 576 -496 576
WIRE 160 608 112 608
WIRE 224 608 160 608
WIRE 1792 608 1472 608
WIRE 112 624 112 608
WIRE -688 656 -688 608
WIRE 224 672 192 672
WIRE 1520 672 1472 672
WIRE 1520 704 1520 672
WIRE 1536 704 1520 704
WIRE 112 720 112 688
WIRE 624 752 624 736
WIRE 1056 752 1056 736
WIRE 1344 752 1344 736
WIRE 1376 752 1344 752
WIRE 768 768 768 736
WIRE 1200 768 1200 736
WIRE 1344 768 1344 752
WIRE 1520 768 1520 704
WIRE 1856 768 1856 480
WIRE 2016 768 2016 416
WIRE 336 800 336 736
WIRE 768 864 768 848
WIRE 1344 864 1344 832
WIRE 1520 864 1520 832
WIRE 1856 864 1856 832
WIRE 2016 864 2016 832
FLAG -304 368 0
FLAG -16 352 0
FLAG 80 544 0
FLAG 112 720 0
FLAG 1664 544 0
FLAG 624 752 0
FLAG 848 -304 0
FLAG 1968 -592 OUT
FLAG 1968 -480 0
FLAG 1888 368 0
FLAG 848 -192 0
FLAG 1056 752 0
FLAG 192 672 0
FLAG -544 -480 0
FLAG 1600 288 0
FLAG 144 -448 0
FLAG 1552 -464 0
FLAG 2016 864 0
FLAG 1856 864 0
FLAG 1520 864 0
FLAG 1344 864 0
FLAG -544 -592 IN
FLAG -32 -208 CSINP
FLAG 32 -208 CSINN
FLAG -688 656 0
FLAG -496 656 0
FLAG -448 640 0
FLAG 160 352 LDO33
FLAG 768 864 LDO33
FLAG 336 800 LDO33
FLAG -128 288 LDO33
FLAG -336 528 FBIN
FLAG 160 288 SWEN
FLAG 576 -592 SW1
FLAG 1104 -592 SW2
FLAG 768 -64 CSP
FLAG 928 -64 CSN
FLAG 640 -80 BG1
FLAG 1056 -80 BG2
FLAG 1472 -80 INTVCC
FLAG 1296 -80 BOOST2
FLAG 400 -144 BOOST1
FLAG 272 -112 TG1
FLAG 1424 -176 TG2
FLAG 160 608 SS
FLAG 880 -448 Sources
FLAG 1552 32 CSPOUT
FLAG 1552 224 FBOUT
FLAG 1552 416 ICP
FLAG 1552 480 ICN
FLAG 1552 544 VC
FLAG 1536 704 IMON_OP
FLAG 1376 752 IMON_ON
FLAG 112 416 0
FLAG -384 -400 0
FLAG -384 -496 vfbin
FLAG 1200 768 vfbin
FLAG 1792 608 0
FLAG 1792 -496 0
FLAG -128 -496 0
FLAG 0 544 0
FLAG -112 -192 0
FLAG 96 -192 0
FLAG -1440 -64 0
FLAG -1440 -144 set
SYMBOL res 256 -320 R0
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL res 1072 -416 R0
SYMATTR InstName R2
SYMATTR Value 1
SYMBOL res 1408 -320 R0
SYMATTR InstName R3
SYMATTR Value 1
SYMBOL res 832 -432 R0
SYMATTR InstName R4
SYMATTR Value 2.5m
SYMBOL res 720 -336 R0
SYMATTR InstName R5
SYMATTR Value 10
SYMBOL res 928 -320 R0
SYMATTR InstName R6
SYMATTR Value 10
SYMBOL cap 832 -224 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1n
SYMBOL cap 928 -224 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 1n
SYMBOL cap 496 -96 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 0.22µ
SYMBOL cap 1264 -96 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 0.22µ
SYMBOL cap 64 336 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 4.7µ
SYMBOL res 208 528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 294K
SYMBOL cap 1584 560 R270
WINDOW 3 0 32 VBottom 2
WINDOW 123 -36 32 VBottom 2
WINDOW 39 -18 32 VBottom 2
WINDOW 0 32 32 VTop 2
SYMATTR Value 10n
SYMATTR SpiceLine Rser=21k Cpar=470p
SYMATTR InstName C6
SYMBOL cap 96 624 R0
SYMATTR InstName C7
SYMATTR Value 47n
SYMBOL ind 784 -576 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 6.8µ
SYMATTR SpiceLine Rser=.47m Rpar=1K
SYMBOL diode 704 -160 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMATTR Value MURS120
SYMBOL diode 1392 -96 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMATTR Value MURS120
SYMBOL res 1600 -320 R0
SYMATTR InstName R8
SYMATTR Value 10
SYMBOL res 1632 -576 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R9
SYMATTR Value 2.5m
SYMBOL res 1872 240 R0
SYMATTR InstName R10
SYMATTR Value 7.68k
SYMBOL voltage -544 -592 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0.1
SYMATTR InstName Bus1
SYMATTR Value 24
SYMBOL res 752 752 R0
SYMATTR InstName R11
SYMATTR Value 100K
SYMBOL voltage 1968 -592 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=1
SYMATTR InstName Cap1
SYMATTR Value 24
SYMBOL nmos 192 -544 R270
WINDOW 0 56 53 VTop 2
WINDOW 3 31 91 VRight 2
SYMATTR InstName Q1
SYMATTR Value BSC016N04LS
SYMBOL nmos 624 -560 R0
WINDOW 3 56 62 Left 2
SYMATTR Value BSC016N04LS
SYMATTR InstName Q2
SYMBOL nmos 1504 -544 M270
WINDOW 0 79 39 VTop 2
WINDOW 3 51 37 VTop 2
SYMATTR InstName Q3
SYMATTR Value BSC016N04LS
SYMBOL nmos 1072 -560 M0
WINDOW 0 -33 26 Left 2
WINDOW 3 -157 58 Left 2
SYMATTR InstName Q4
SYMATTR Value BSC016N04LS
SYMBOL res 64 -608 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 2m
SYMBOL res 592 -400 R0
SYMATTR InstName R13
SYMATTR Value 1
SYMBOL res -320 96 R0
SYMATTR InstName R14
SYMATTR Value 665K
SYMBOL res 1872 64 R0
SYMATTR InstName R15
SYMATTR Value 162k
SYMBOL cap 1600 96 M180
WINDOW 0 28 50 Left 2
WINDOW 3 37 30 Left 2
SYMATTR InstName C8
SYMATTR Value 470n
SYMBOL cap 1584 272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C9
SYMATTR Value 4.7µ
SYMBOL cap 128 -544 R0
SYMATTR InstName C10
SYMATTR Value 9µ
SYMATTR SpiceLine Rser=4m
SYMBOL cap 1536 -560 R0
SYMATTR InstName C11
SYMATTR Value 9µ
SYMATTR SpiceLine Rser=4m
SYMBOL cap 2000 768 R0
WINDOW 3 40 35 Left 2
WINDOW 123 27 59 Left 2
SYMATTR Value 4.7n
SYMATTR Value2 Rpar=17.4K
SYMATTR InstName C12
SYMBOL cap 1840 768 R0
WINDOW 3 40 35 Left 2
WINDOW 123 23 58 Left 2
SYMATTR Value 4.7n
SYMATTR Value2 Rpar=17.4K
SYMATTR InstName C13
SYMBOL res 32 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 100K
SYMBOL LT8708 848 352 R0
SYMATTR InstName U1
SYMBOL cap -672 -576 R0
SYMATTR InstName C14
SYMATTR Value 470µ
SYMATTR SpiceLine Rser=20m
SYMBOL cap 2240 -576 R0
SYMATTR InstName C15
SYMATTR Value 470µ
SYMATTR SpiceLine Rser=20m
SYMBOL res -320 256 R0
SYMATTR InstName R17
SYMATTR Value 100k
SYMBOL res -480 512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 365
SYMBOL res -480 672 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R19
SYMATTR Value 976
SYMBOL cap -464 576 R0
SYMATTR InstName C16
SYMATTR Value 4.7µ
SYMBOL cap 880 -80 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C17
SYMATTR Value 3.3n
SYMBOL bv -688 512 R0
WINDOW 3 -87 174 Left 2
SYMATTR Value V=limit((V(CSINN,CSINP)*50+V(set)),0,3.3)
SYMATTR InstName B1
SYMBOL res -400 -608 R0
SYMATTR InstName R20
SYMATTR Value 191k
SYMBOL res -400 -496 R0
SYMATTR InstName R21
SYMATTR Value 7.68k
SYMBOL cap -144 -560 R0
SYMATTR InstName C18
SYMATTR Value 9µ
SYMATTR SpiceLine Rser=4m
SYMBOL cap 1776 -560 R0
SYMATTR InstName C19
SYMATTR Value 9µ
SYMATTR SpiceLine Rser=4m
SYMBOL res -80 -432 R0
SYMATTR InstName R22
SYMATTR Value 10
SYMBOL res 48 -432 R0
SYMATTR InstName R23
SYMATTR Value 10
SYMBOL cap 32 -288 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C20
SYMATTR Value 1µ
SYMBOL cap -16 480 R0
SYMATTR InstName C21
SYMATTR Value 47n
SYMBOL cap -128 -256 R0
SYMATTR InstName C22
SYMATTR Value 100n
SYMBOL cap 80 -256 R0
SYMATTR InstName C23
SYMATTR Value 100n
SYMBOL voltage -1440 -160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PWL(0 1.65 5m 1.65 5.1m 3 10m 3 10.1m 2.65 15m 2.65 30m 0.65 45m 2.65)
SYMBOL cap 1328 768 R0
SYMATTR InstName C24
SYMATTR Value 10n
SYMATTR SpiceLine Rpar=21k
SYMBOL cap 1504 768 R0
SYMATTR InstName C25
SYMATTR Value 10n
SYMATTR SpiceLine Rpar=21k
TEXT 1512 1000 Left 2 !.tran 60m\n.ic V(OUT)=24\n.ic V(IN)=24\n.model SW3 SW(Ron=1.33 Roff=25 Vt=2.5 Vh=0.1)
TEXT 816 -664 Center 3 ;24V Bidirectional Power Buffer System with FHCM and RHCM
TEXT 2392 -552 Left 2 ;supercap side
TEXT -864 -576 Left 2 ;power bus
